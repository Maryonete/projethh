{% extends 'base.html.twig' %} {% block title %}Habitat Humanisme{% endblock %}
{% block body %}
<div class="container">
  <div class="col-md-12">
    {% for message in app.flashes('success') %}
    <div class="alert alert-success mt-4">
      {{ message }}
    </div>
    {% endfor %}
    <h1>Interface d'administration des associations</h1>
  </div>
  <div class="col-sm-6 col-lg-8">
    <table class="table table-striped table-hover sortTable" id="assoList">
      <caption>
        Liste des associations
      </caption>
      <thead>
        <tr class="text-center">
          <th scope="col">Code</th>
          <th scope="col">Libellé</th>
          <th scope="col">Président.e</th>
          <th scope="col">Référent.e</th>
        </tr>
      </thead>
      <tbody>
        {% for asso in listAsso %}
        <tr>
          <td>{{ asso.code }}</td>
          <td>{{ asso.libelle }}</td>
          <td>
            {{ asso.president.user.firstname }}
            {{ asso.president.user.lastname }}
          </td>
          <td>
            {% if asso.referent is not empty %}
            {{ asso.referent.user.firstname }}
            {{ asso.referent.user.lastname }}
            {% endif %}
          </td>
          <td>
            <a
              href="{{ path('asso_show', { id: asso.id }) }}"
              title="Visualiser"
              ><i class="fa-solid fa-eye"></i
            ></a>
          </td>
          <td>
            <a
              href="{{ path('asso_edit', { id: asso.id }) }}"
              title="Mise à jour"
              ><i class="fa-solid fa-pen"></i
            ></a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-6 col-lg-4">autres</div>
</div>
<script>
  $(document).ready(function () {
    $("#assoList").DataTable({
      order: [0, "desc"],
      searching: true,
      info: false,
      paging: false,

      columns: [
        null, // Deuxième colonne (Code)
        null, // Troisième colonne (Libellé)
        null, // Quatrième colonne (Président.e)
        null, // Quatrième colonne (Référent.e)
        { orderable: false }, // Cinquième colonne (Actions)
        { orderable: false }, // Cinquième colonne (Actions)
      ],
      // searchDelay: 300, // Délai avant la prise en compte de la recherche pour éviter un filtrage excessif
    });
  });
</script>
{% endblock %}
